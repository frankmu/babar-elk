<div class="detector-modal">
  <ml-message-bar ></ml-message-bar>
  <h3>{{title}}</h3>

  <div class="form-group">
    <label>Description</label><i ml-info-icon="new_job_detector_description" />
    <input
      ng-model="detector.detector_description"
      tabindex="1"
      placeholder="{{ detectorToString(detector) }}"
      class="form-control" />
  </div>

  <div class="editor-color detector_field_form">

    <datalist id="properties_datalist">
      <option ng-repeat="(key, prop) in properties" >{{key}}</option>
    </datalist>

    <datalist id="properties_datalist_byFieldName">
      <option ng-repeat="(key, prop) in properties_byFieldName" >{{key}}</option>
    </datalist>

    <datalist id="exclude_frequent_datalist">
      <option value="all">all</option>
      <option value="none">none</option>
    </datalist>

    <div class="field-cols">
      <div class="form-group">
        <label>function</label><i ml-info-icon="new_job_detector_function" />

        <select
          ng-model="detector.function"
          ng-change="functionChange()"
          class="form-control">
          <option ng-repeat="func in functions" >{{func.id}}</option>
        </select>

      </div>
      <div class="form-group">
        <label>over_field_name</label><i ml-info-icon="new_job_detector_overfieldname" />
        <input
          ng-model="detector.over_field_name"
          type="text"
          tabindex="5"
          list='properties_datalist'
          class="form-control" />
      </div>
    </div>

    <div class="field-cols">
      <div class="form-group">
        <label>field_name</label><i ml-info-icon="new_job_detector_fieldname" />
        <input
          ng-model="detector.field_name"
          type="text"
          tabindex="3"
          list='properties_datalist'
          class="form-control" />
      </div>
      <div class="form-group">
        <label>partition_field_name</label><i ml-info-icon="new_job_detector_partitionfieldname" />
        <input
          ng-model="detector.partition_field_name"
          type="text"
          tabindex="6"
          list='properties_datalist'
          class="form-control" />
      </div>
    </div>

    <div class="field-cols">
      <div class="form-group">
        <label>by_field_name</label><i ml-info-icon="new_job_detector_byfieldname" />
        <input
          ng-model="detector.by_field_name"
          type="text"
          tabindex="4"
          list='properties_datalist_byFieldName'
          class="form-control" />
      </div>
      <div class="form-group">
        <label>exclude_frequent</label><i ml-info-icon="new_job_detector_excludefrequent" />
        <input
          ng-model="detector.exclude_frequent"
          type="text"
          tabindex="7"
          list='exclude_frequent_datalist'
          class="form-control" />
      </div>
    </div>

  </div>
  <small><div class='help-pane'><ml-documentation-help-link ml-uri="{{helpLink.uri}}" ml-label="{{helpLink.label}}"></ml-documentation-help-link></div></small>

  <hr />

  <button
    ng-click="save()"
    ng-disabled="(saveLock === true) || (detector.function === '')"
    class="kuiButton kuiButton--primary"
    aria-label="Save">
    {{ (editMode? "Update" : "Add") }}
  </button>
  <button
    ng-click="cancel()"
    ng-disabled="(saveLock === true)"
    class="kuiButton kuiButton--primary"
    aria-label="Cancel">
    Cancel
  </button>
</div>
